// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`compileProject (audioBuffer example) > compiles modules, functions, and config into runtime-ready output 1`] = `
{
  "codeBlocks": [
    {
      "code": [
        "config project",
        "",
        "rescope "memorySizeBytes"",
        "push 65536",
        "set",
        "popScope",
        "",
        "scope "runtimeSettings"",
        "scope "sampleRate"",
        "push 44100",
        "set",
        "",
        "rescopeTop "runtime"",
        "push "AudioWorkletRuntime"",
        "set",
        "",
        "rescopeTop "audioOutputBuffers[0]"",
        "",
        "scope "memoryId"",
        "push "audioout.buffer"",
        "set",
        "",
        "rescopeTop "channel"",
        "push 0",
        "set",
        "",
        "rescopeTop "output"",
        "push 0",
        "set",
        "",
        "configEnd",
      ],
      "gridCoordinates": {
        "x": -87,
        "y": 1,
      },
    },
    {
      "code": [
        "module audioout",
        "use env",
        "",
        "float* in &phaseAccumulator.out",
        "",
        "; Audio buffer",
        "float[] buffer AUDIO_BUFFER_SIZE",
        "int pointer &buffer",
        "",
        "; @plot buffer -2 2",
        "",
        "; Store the input value",
        "; in the buffer",
        "push pointer",
        "push *in",
        "store",
        "",
        "; Increment the buffer ",
        "; pointer by the",
        "; buffer word size",
        "push &pointer",
        "push pointer",
        "push %buffer",
        "add",
        "store",
        "",
        "; Reset the buffer pointer",
        "; when it reaches the end",
        "; of the buffer",
        "push pointer",
        "push buffer&",
        "greaterThan",
        "if void",
        " push &pointer",
        " push &buffer",
        " store",
        "ifEnd",
        "",
        "moduleEnd",
      ],
      "gridCoordinates": {
        "x": 88,
        "y": 1,
      },
    },
    {
      "code": [
        "constants env",
        "; Auto-generated environment constants",
        "; Changes will be overwritten",
        "; Last updated: 1/19/2026, 9:24:55 PM",
        "",
        "const SAMPLE_RATE 44100",
        "const AUDIO_BUFFER_SIZE 128",
        "",
        "constantsEnd",
      ],
      "gridCoordinates": {
        "x": -42,
        "y": 1,
      },
    },
    {
      "code": [
        "constants math",
        "",
        "const PI      3.141592653589793",
        "const NEG_PI -3.141592653589793",
        "const TAU     6.283185307179586",
        "const HALF_PI 1.570796326794896",
        "const INV_PI  0.318309886183790",
        "const INV_TAU 0.159154943091895",
        "const PHI     1.618033988749895",
        "const DEG2RAD 0.017453292519943",
        "const RAD2DEG 57.29577951308232",
        "const SQRT2   1.414213562373095",
        "const SQRT1_2 0.707106781186547",
        "const LN2     0.693147180559945",
        "const LN10    2.302585092994046",
        "const LOG2E   1.442695040888963",
        "const LOG10E  0.434294481903251",
        "const E       2.718281828459045",
        "",
        "constantsEnd",
      ],
      "gridCoordinates": {
        "x": -42,
        "y": 14,
      },
    },
    {
      "code": [
        "module phaseAccumulator",
        "use env",
        "",
        "float defaultFreq 440",
        "float* frequency &defaultFreq",
        "float phase",
        "float out",
        "",
        "use math",
        "",
        "; Advance phase by",
        "; TAU * frequency / SAMPLE_RATE",
        "push &phase",
        "push phase",
        "push TAU",
        "push *frequency",
        "mul",
        "push SAMPLE_RATE",
        "castToFloat",
        "ensureNonZero",
        "div",
        "add",
        "store ",
        "",
        "; Wrap phase when it exceeds PI",
        "push phase",
        "push PI",
        "greaterThan",
        "if void",
        "push &phase",
        "push NEG_PI",
        "store",
        "ifEnd",
        "",
        "push &out",
        "push phase",
        "; You can swap this call ",
        "; with any periodic function",
        "call sine",
        "store",
        "",
        "moduleEnd",
      ],
      "gridCoordinates": {
        "x": 46,
        "y": 1,
      },
    },
    {
      "code": [
        "function sine",
        "; Polynomial approximation ",
        "; of the sine function with",
        "; Taylor series (7th order)",
        "; Only works in the range of",
        "; [-PI, PI]",
        "param float x",
        "",
        "use math",
        "",
        "; Fold to [-pi/2, pi/2]",
        "localGet x",
        "push HALF_PI",
        "greaterThan",
        "if void",
        "push PI",
        "localGet x",
        "sub",
        "localSet x",
        "ifEnd",
        "",
        "localGet x",
        "push HALF_PI",
        "push -1.0",
        "mul",
        "lessThan",
        "if void",
        "push PI",
        "push -1.0",
        "mul",
        "localGet x",
        "sub",
        "localSet x",
        "ifEnd",
        "",
        "local float x2",
        "localGet x",
        "dup",
        "mul",
        "localSet x2",
        "",
        "; Taylor coefficients",
        "const T1 -0.1666666666",
        "const T2 0.0083333333",
        "const T3 -0.000198412",
        "",
        "localGet x2",
        "push T3",
        "mul",
        "push T2",
        "add",
        "localGet x2",
        "mul",
        "push T1",
        "add",
        "localGet x2",
        "mul",
        "push 1.0",
        "add",
        "localGet x",
        "mul",
        "",
        "functionEnd float",
      ],
      "gridCoordinates": {
        "x": 7,
        "y": 1,
      },
    },
  ],
  "compiledModules": {
    "audioout": {
      "byteAddress": 4,
      "cycleFunction": [
        80,
        2,
        1,
        127,
        1,
        125,
        65,
        136,
        4,
        40,
        2,
        0,
        65,
        4,
        40,
        2,
        0,
        42,
        2,
        0,
        33,
        1,
        33,
        0,
        32,
        0,
        65,
        255,
        255,
        3,
        74,
        4,
        127,
        65,
        0,
        5,
        32,
        0,
        11,
        32,
        1,
        56,
        2,
        0,
        65,
        136,
        4,
        65,
        136,
        4,
        40,
        2,
        0,
        65,
        4,
        106,
        54,
        2,
        0,
        65,
        136,
        4,
        40,
        2,
        0,
        65,
        132,
        4,
        74,
        4,
        64,
        65,
        136,
        4,
        65,
        8,
        54,
        2,
        0,
        11,
        11,
      ],
      "id": "audioout",
      "index": 2,
      "initFunctionBody": [],
      "initOnlyExecution": undefined,
      "memoryMap": {
        "buffer": {
          "byteAddress": 8,
          "default": {},
          "elementWordSize": 4,
          "id": "buffer",
          "isInteger": false,
          "isPointer": false,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 128,
          "type": "float",
          "wordAlignedAddress": 2,
          "wordAlignedSize": 128,
        },
        "in": {
          "byteAddress": 4,
          "default": 536,
          "elementWordSize": 4,
          "id": "in",
          "isInteger": true,
          "isPointer": true,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "float*",
          "wordAlignedAddress": 1,
          "wordAlignedSize": 1,
        },
        "pointer": {
          "byteAddress": 520,
          "default": 8,
          "elementWordSize": 4,
          "id": "pointer",
          "isInteger": true,
          "isPointer": false,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "int",
          "wordAlignedAddress": 130,
          "wordAlignedSize": 1,
        },
      },
      "skipExecutionInCycle": undefined,
      "wordAlignedAddress": 1,
      "wordAlignedSize": 130,
    },
    "env": {
      "byteAddress": 4,
      "cycleFunction": [
        2,
        0,
        11,
      ],
      "id": "env",
      "index": 0,
      "initFunctionBody": [],
      "initOnlyExecution": undefined,
      "memoryMap": {},
      "skipExecutionInCycle": undefined,
      "wordAlignedAddress": 1,
      "wordAlignedSize": 0,
    },
    "math": {
      "byteAddress": 4,
      "cycleFunction": [
        2,
        0,
        11,
      ],
      "id": "math",
      "index": 1,
      "initFunctionBody": [],
      "initOnlyExecution": undefined,
      "memoryMap": {},
      "skipExecutionInCycle": undefined,
      "wordAlignedAddress": 1,
      "wordAlignedSize": 0,
    },
    "phaseAccumulator": {
      "byteAddress": 524,
      "cycleFunction": [
        100,
        1,
        1,
        125,
        65,
        148,
        4,
        65,
        148,
        4,
        42,
        2,
        0,
        67,
        219,
        15,
        201,
        64,
        65,
        144,
        4,
        40,
        2,
        0,
        42,
        2,
        0,
        148,
        65,
        196,
        216,
        2,
        178,
        33,
        0,
        32,
        0,
        67,
        0,
        0,
        0,
        0,
        91,
        4,
        64,
        67,
        0,
        0,
        128,
        63,
        33,
        0,
        11,
        32,
        0,
        149,
        146,
        56,
        2,
        0,
        65,
        148,
        4,
        42,
        2,
        0,
        67,
        219,
        15,
        73,
        64,
        94,
        4,
        64,
        65,
        148,
        4,
        67,
        219,
        15,
        73,
        192,
        56,
        2,
        0,
        11,
        65,
        152,
        4,
        65,
        148,
        4,
        42,
        2,
        0,
        16,
        4,
        56,
        2,
        0,
        11,
      ],
      "id": "phaseAccumulator",
      "index": 3,
      "initFunctionBody": [],
      "initOnlyExecution": undefined,
      "memoryMap": {
        "defaultFreq": {
          "byteAddress": 524,
          "default": 440,
          "elementWordSize": 4,
          "id": "defaultFreq",
          "isInteger": false,
          "isPointer": false,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "float",
          "wordAlignedAddress": 131,
          "wordAlignedSize": 1,
        },
        "frequency": {
          "byteAddress": 528,
          "default": 524,
          "elementWordSize": 4,
          "id": "frequency",
          "isInteger": true,
          "isPointer": true,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "float*",
          "wordAlignedAddress": 132,
          "wordAlignedSize": 1,
        },
        "out": {
          "byteAddress": 536,
          "default": 0,
          "elementWordSize": 4,
          "id": "out",
          "isInteger": false,
          "isPointer": false,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "float",
          "wordAlignedAddress": 134,
          "wordAlignedSize": 1,
        },
        "phase": {
          "byteAddress": 532,
          "default": 0,
          "elementWordSize": 4,
          "id": "phase",
          "isInteger": false,
          "isPointer": false,
          "isPointingToInteger": false,
          "isPointingToPointer": false,
          "isUnsigned": false,
          "numberOfElements": 1,
          "type": "float",
          "wordAlignedAddress": 133,
          "wordAlignedSize": 1,
        },
      },
      "skipExecutionInCycle": undefined,
      "wordAlignedAddress": 131,
      "wordAlignedSize": 4,
    },
  },
  "compiledProjectConfig": {
    "binaryAssets": [],
    "disableAutoCompilation": false,
    "memorySizeBytes": 65536,
    "runtimeSettings": {
      "audioOutputBuffers": [
        {
          "channel": 0,
          "memoryId": "audioout.buffer",
          "output": 0,
        },
      ],
      "runtime": "AudioWorkletRuntime",
      "sampleRate": 44100,
    },
  },
  "compiledWasm": "AGFzbQEAAAABFARgAABgAX8Bf2ACf38Bf2ABfQF9Ag8BAmpzBm1lbW9yeQIDAQEDDg0AAAAAAwAAAAAAAAAAByQEBGluaXQAAAVjeWNsZQABCGluaXRPbmx5AAIGYnVmZmVyAAMKiwMNCgAQCRAKEAsQDAsKABAFEAYQBxAICwIACxkBAX9BgAEhAANAEAEgAEEBayEAIAANAAsLagIBfQF9IABD2w/JP14EQEPbD0lAIACTIQALIABD2w/JP0MAAIC/lF0EQEPbD0lAQwAAgL+UIACTIQALIAAhAiACIAKUIQEgAUPRDFC5lEOIiAg8kiABlEOrqiq+kiABlEMAAIA/kiAAlAsCAAsCAAtQAgF/AX1BiAQoAgBBBCgCACoCACEBIQAgAEH//wNKBH9BAAUgAAsgATgCAEGIBEGIBCgCAEEEajYCAEGIBCgCAEGEBEoEQEGIBEEINgIACwtkAQF9QZQEQZQEKgIAQ9sPyUBBkAQoAgAqAgCUQcTYArIhACAAQwAAAABbBEBDAACAPyEACyAAlZI4AgBBlAQqAgBD2w9JQF4EQEGUBEPbD0nAOAIAC0GYBEGUBCoCABAEOAIACwIACwIACxIAQQRBmAQ2AgBBiARBCDYCAAsWAEGMBEMAANxDOAIAQZAEQYwENgIACw==",
  "viewport": {
    "gridCoordinates": {
      "x": -44,
      "y": 0,
    },
  },
}
`;
